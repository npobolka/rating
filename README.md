# Звездный рейтинг для MODX Evolution
## Star Rating for MODX Evolution

**Сборка с использованием плагина [jquery.raty](http://www.wbotelhos.com/raty/)**
Отличается от основной сборки очень гибкими настройками (изображения звезд, оформление и т.д.).

### Установка

Создать новый сниппет с именем `star_rating` и следующим содержимым:

```php
<?php
return require MODX_BASE_PATH . 'assets/snippets/star_rating/snippet.php';
?>
```

Создать новый модуль `Star Rating`, со следующим содержимым:

```php
include MODX_BASE_PATH . 'assets/snippets/star_rating/starrating.module.php';
```

После создания модуля необходимо обновить страницу чтобы ссылка на модуль появилась на вкладке `"Модули"`.
 Далее если вы ранее не устанавливали этот компонент необходимо нажать кнопку `"Установить"`.

### Использование

Пример вызова сниппета:
```
[!star_rating? &id=`[*id*]` &tpl=`@CHUNK:star_rating`!]
```

#### Параметры сниппета
|    Параметр    | По умолчанию  |   Описание    |
| -------------- | :-----------: | ------------- |
| **id**         | `[*id*]`      | ID документа. Если не указать будет использован ID текущего документа  |
| **uid**        | -             | UID блока если используется больше одного Star Rating на странице  |
| **tpl**        | `template`    | Шаблон для вывода рейтинга. Для использования чанков MODX следует у имени чанка добавить приставку `@CHUNK:` как на примере |
| **lang**       | `ru`          | Язык. Все языки находятся в папке `/assets/snippets/star_rating/langs/` |
| **interval**   | `86400`       | Интервал в секундах по итечении которого можно будет оставить голос снова |
| **noJs**       | -             | Если указать `1` встроенные скрипты не будут выводиться на страницу |
| **noCss**      | -             | Если указать `1` встроенные стили не будут выводиться на страницу |
| **class**      | -             | Добавляет ваш css класс в шаблон `<div class="star-rating-container[+class+]">`, указывать без пробела |
| **stars**      | 5             | Количество звезд рейтинга |
| **starOn**     | -             | Изображение заполненной звезды (указывать только имя файла с расширением) |
| **starOff**    | -             | Изображение не заполненной звезды (указывать только имя файла с расширением) |
| **starHalf**   | -             | Изображение полу-заполненной звезды (указывать только имя файла с расширением) |
| **imagesPath** | -             | Путь к папке с изображениями звезд. `starOn`, `starOff`, `starHalf` связыны с этим параметром |
| **readOnly**   | `false`       | Запрещает возможность голосовать, только просмотр рейтинга |
| **starType**   | `img`         | По умолчанию `img`, если указать `span` то вместо изображений будет использоваться шрифт со звездами |
| **blank**   | 0       | Звезды отобразятся без заливки (0) или закрасится n количество звезд независимо от рейтинга. Число не может быть больше stars |
| **precision**  | 2       | Кол-во разрядов после десятичной точки  |

Основной скрипт для работы сниппета находится по этому пути `assets/snippets/star_rating/assets/js/scripts.min.js`. Можно отключить добавив к вызову сниппета ``$noJs=`1` ``.

Файл со стилям `assets/snippets/star_rating/assets/css/styles.min.css`. Можно отключить добавив к вызову сниппета ``$noCss=`1` ``.

Дефолтный шаблон оформления рейтинга `assets/snippets/star_rating/chunks/template.chunk.tpl`. Можете скопировать его содержимое и создать чанк, но тогда вам придется в вызове сниппета указывать его явно: ``&tpl=`@CHUNK:my_template` ``.

Компонент автоматически подключает jQuery в случае, если не используется другая версия jQuery на странице с вызовом сниппета. Его также можно принудительно отключить используя параметр ``&noJs=`1` ``, основной скрипт так же будет отключен.
